<div class="col vh-80 border overflow-auto p-2" id="chat">
  <div *ngFor="let message of conversation?.messages" class="">

    <div *ngIf="message.sender !== requesterId" class="mb-2 d-flex">
      <div class="bg-light-blue rounded p-1 d-flex align-items-center">
        <a [routerLink]="['/users', message.sender]" class="text-decoration-none">{{getSenderName(message)}} : </a>
        <div>{{message.content}}</div>
      </div>
    </div>

    <div *ngIf="message.sender === requesterId" class="mb-2 d-flex flex-row-reverse">
      <div class="bg-dark-blue text-white rounded p-1">
        {{message.content}}
      </div>
      <button class="btn bg-pink" *ngIf="message.sender === requesterId" (click)="deleteMessage(message)">
        <img class="img-fluid mx-auto d-block" src="../resources/trash.svg" alt="delete"/>
      </button>
    </div>

  </div>
</div>

<div>
  <p *ngIf="conversation.isBlocked" [ngStyle]="{color: 'red'}"> {{systemMessage}}</p>
  <div class="publisher bt-1 border-light">
    <form (ngSubmit)="onSubmit(formMessage)" #formMessage="ngForm">
      <input type="text" id="message" placeholder="Ecrivez votre message..." class="form-control" name="message"
             minlength="1" [(ngModel)]="message" required="" [disabled]="conversation.isBlocked">
      <button class="btn btn-primary" type="submit" [disabled]="formMessage.invalid || conversation?.isBlocked">
        Envoyer
      </button>
      <button class="btn btn-danger" (click)="deleteConversation()">Supprimer la conversation</button>
    </form>
  </div>
</div>
